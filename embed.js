!function(){const e=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=()=>String(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,""),i="/experiences/:slug",r="/guides/:slug",n=t=>{var r;return null===(r=t.match(new RegExp(`^${e(l())}${i.replace(":slug","([^/?]+)")}`)))||void 0===r?void 0:r[1]},s=t=>{var i;return null===(i=t.match(new RegExp(`^${e(l())}${r.replace(":slug","([^/?]+)")}`)))||void 0===i?void 0:i[1]},a=e=>r.replace(":slug",null!=e?e:""),o=e=>"https://embed.out.gd"+(e?`/#${(e=>`/embed${e}`)(e)}`:""),l=(e="")=>`https://outguided-frontend-dev.herokuapp.com${e}`,c=(e,...t)=>{console.log(e,...t)},d=e=>{window.addEventListener("message",e,!1)},g={border:"none",width:"0px",height:"0px","overflow-x":"hidden","overflow-y":"hidden",display:"block"},u={scrolling:"no",frameborder:"0",allowtransparency:"true",allowfullscreen:"true"};!function(e){const r={processedWidgets:[],listenerCallbacks:[],listenerRegistered:!1,init:function(){this.registerListener();document.querySelectorAll(`a[data-og-widget][href^="${l()}"]`).forEach(this.initializeWidget.bind(this))},registerListener:function(){this.listenerRegistered||(d((e=>{this.listenerCallbacks.forEach((t=>t(e)))})),this.listenerRegistered=!0)},addListenerCallback:function(e){this.listenerCallbacks.push(e)},initializeWidget:function(e){if(this.processedWidgets.includes(e))return;this.processedWidgets.push(e);const t=this.getWidgetCallbackUrl(e);if(!t)return;const i=this.createIframe(t);i.onload=()=>{e.remove()},e.after(i),this.addListenerCallback(this.getWidgetListenerCallback(i))},getWidgetCallbackUrl:function(e){let t;const{href:r,dataset:{ogCode:l}}=e;var c,d;return n(r)?(c=n(r),t=i.replace(":slug",null!=c?c:"")):s(r)&&(t=a(s(r))),t?void 0!==l?"https://embed.out.gd"+((d=t)?`/#${(e=>`/code${e}`)(d)}`:""):o(t):null},createIframe:function(i){let r;try{r=document.createElement('<iframe name="'+t()+'"></iframe>')}catch(e){r=document.createElement("iframe"),r.name=t()}return r.src=i+"?source="+encodeURIComponent(e.location.origin),Object.keys(u).forEach((e=>r.setAttribute(e,u[e]))),Object.keys(g).forEach((e=>r.style.setProperty(e,g[e]))),r},getWidgetListenerCallback:function(t){return i=>{const{origin:r,data:{type:n,name:s}}=i;if(c("received event:",i.data),o().startsWith(r)&&t.name===s)switch(n){case"size":const{width:r,height:n}=i.data;t.style.height=n+"px",t.style.width=r+"px";break;case"copy":const{text:s}=i.data;e.navigator.clipboard.writeText(s)}}}};e.OGWidgets||(r.init(),e.onload=()=>r.init(),e.OGWidgets=r)}(window)}();
//# sourceMappingURL=embed.js.map
