{"version":3,"sources":["config/Routes.ts","embed.ts"],"names":[],"mappings":"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","file":"embed.f68637fa.js","sourceRoot":"../src","sourcesContent":["export const TRIP_PAGE = '/experiences/:slug'\nexport const HOST_PAGE = '/guides/:slug'\nexport const tripLink = (slug: string) => TRIP_PAGE.replace(':slug', slug)\nexport const hostLink = (slug: string) => HOST_PAGE.replace(':slug', slug)\nexport const getEmbedPath = (path: string) => `/embed${path}`\nexport const getEmbedUrl = (path: string) => `${process.env.EMBED_URL}/#${getEmbedPath(path)}`\nexport const getExternalUrl = (path: string = '') => `${process.env.SITE_URL}${path}`\n","import { getEmbedUrl, getExternalUrl, hostLink, tripLink } from './config/Routes'\ndeclare global {\n    interface Window {\n        OGWidgets: {\n            init: () => void\n        }\n    }\n}\n;(function (window) {\n    //body of the function\n\n    window.OGWidgets = window.OGWidgets || {}\n\n    window.OGWidgets.init = () => {\n        console.log('init widget')\n        const elements = document.querySelectorAll(\n            '[data-og-widget]:not([data-og-initialized])'\n        ) as NodeListOf<HTMLElement>\n\n        elements.forEach((element) => {\n            element.setAttribute('data-og-initialized', '1')\n            const { ogWidget, ogTrip, ogGuide } = element.dataset\n            if (!ogWidget) {\n                return\n            }\n            let url\n            switch (ogWidget) {\n                case 'trip':\n                    url = ogTrip && getEmbedUrl(tripLink(ogTrip))\n                    break\n                case 'guide':\n                    url = ogGuide && getEmbedUrl(hostLink(ogGuide))\n                    break\n            }\n            if (!url) {\n                return\n            }\n            console.log(url)\n            const href = element.getAttribute('href')\n            if (!href?.startsWith(getExternalUrl())) {\n                console.log('external link dont match: ', href?.startsWith(getExternalUrl()))\n            }\n            var iframe = document.createElement('iframe')\n            iframe.src = url\n            iframe.style.border = 'none'\n            iframe.style.overflowX = 'hidden'\n            iframe.style.overflowY = 'hidden'\n            iframe.style.display = 'block'\n\n            iframe.onload = () => {\n                const height = iframe?.contentWindow?.document.body.scrollHeight\n                const width = iframe?.contentWindow?.document.getElementById('root')?.children[0].scrollWidth\n                if (height) {\n                    iframe.style.height = height + 1 + 'px'\n                }\n                if (width) {\n                    iframe.style.width = width + 3 + 'px'\n                }\n            }\n            element.after(iframe)\n            element.remove()\n        })\n    }\n})(window)\n\n\n"]}