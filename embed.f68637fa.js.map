{"version":3,"sources":["config/Routes.ts","embed.ts"],"names":[],"mappings":"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","file":"embed.f68637fa.js","sourceRoot":"../src","sourcesContent":["export const TRIP_PAGE = '/experiences/:slug'\nexport const HOST_PAGE = '/guides/:slug'\nexport const tripLink = (slug: string) => TRIP_PAGE.replace(':slug', slug)\nexport const hostLink = (slug: string) => HOST_PAGE.replace(':slug', slug)\nexport const getEmbedPath = (path: string) => `/embed${path}`\nexport const getEmbedUrl = (path?: string) => `${process.env.EMBED_URL}${path ? `/#${getEmbedPath(path)}` : ''}`\nexport const getExternalUrl = (path: string = '') => `${process.env.SITE_URL}${path}`\n","import { getEmbedUrl, getExternalUrl, hostLink, tripLink } from './config/Routes'\nimport { EmbedMessage, EmbedSizeMessage } from './types'\ndeclare global {\n    interface Window {\n        OGWidgets: {\n            init: () => void\n        }\n    }\n}\n\n;(function (window) {\n    window.OGWidgets = window.OGWidgets || {}\n    window.OGWidgets.init = () => {\n        const elements = document.querySelectorAll(\n            '[data-og-widget]:not([data-og-initialized])'\n        ) as NodeListOf<HTMLElement>\n\n        elements.forEach((element) => {\n            element.setAttribute('data-og-initialized', '1')\n            const { ogWidget, ogTrip, ogGuide } = element.dataset\n            if (!ogWidget) {\n                return\n            }\n            let url\n            switch (ogWidget) {\n                case 'trip':\n                    url = ogTrip && getEmbedUrl(tripLink(ogTrip))\n                    break\n                case 'guide':\n                    url = ogGuide && getEmbedUrl(hostLink(ogGuide))\n                    break\n            }\n\n            if (!url) {\n                return\n            }\n\n            const href = element.getAttribute('href')\n            if (!href?.startsWith(getExternalUrl())) {\n                return\n            }\n\n            const iframe = document.createElement('iframe')\n            iframe.src = url\n            iframe.style.border = 'none'\n            iframe.style.overflowX = 'hidden'\n            iframe.style.overflowY = 'hidden'\n            iframe.style.display = 'block'\n\n            window?.addEventListener(\n                'message',\n                (event) => {\n                    if (getEmbedUrl().startsWith(event.origin)) {\n                        const { type } = event.data as EmbedMessage\n                        switch (type) {\n                            case 'size':\n                                const { width, height } = event.data as EmbedSizeMessage\n                                iframe.style.height = height + 'px'\n                                iframe.style.width = width + 'px'\n                                break\n                            case 'other':\n                                console.log('other event')\n                                break\n                        }\n                    }\n                },\n                false\n            )\n            element.after(iframe)\n            element.style.display = 'none'\n        })\n    }\n    window.onload = window.OGWidgets.init\n})(window)\n"]}